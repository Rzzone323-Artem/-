<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>{{PRODUCT_NAME}} - –ß–£–î–û-–ë–ê–ó–ê–† "–°–≤—è—Ç–æ–π –ê–ª—Ç–∞—Ä—å"</title>
<link rel="stylesheet" href="style.css">
<script src="sounds.js"></script>
<style>
.product-detail-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
    background: linear-gradient(145deg, rgba(0,0,0,0.9), rgba(20,0,20,0.9));
    border: 3px solid #ff0066;
    border-radius: 15px;
    margin-top: 20px;
}

.product-header {
    text-align: center;
    margin-bottom: 40px;
}

.product-title {
    font-size: 3em;
    color: #ff0066;
    text-shadow: 0 0 20px #ff0066;
    margin-bottom: 20px;
    animation: glow 2s ease-in-out infinite alternate;
}

@keyframes glow {
    from { text-shadow: 0 0 20px #ff0066; }
    to { text-shadow: 0 0 30px #ff0066, 0 0 40px #ff0066; }
}

.product-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    align-items: center;
}

.product-image {
    text-align: center;
}

.product-image img {
    max-width: 100%;
    height: 400px;
    object-fit: cover;
    border: 3px solid #8a2be2;
    border-radius: 10px;
    box-shadow: 0 0 30px rgba(138, 43, 226, 0.5);
}

.product-info {
    color: #0F0;
    font-family: "Courier New", monospace;
}

.product-description {
    font-size: 1.2em;
    line-height: 1.6;
    margin-bottom: 30px;
}

.product-price {
    font-size: 2em;
    color: #FFD700;
    text-shadow: 0 0 15px #FFD700;
    margin-bottom: 30px;
}

.under-construction {
    background: linear-gradient(145deg, rgba(255,0,0,0.1), rgba(255,165,0,0.1));
    border: 2px solid #FF4500;
    border-radius: 10px;
    padding: 30px;
    text-align: center;
    margin: 30px 0;
}

.under-construction h2 {
    color: #FF4500;
    font-size: 2em;
    margin-bottom: 15px;
    animation: blink 1s infinite;
}

@keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0.5; }
}

.under-construction p {
    color: #FFD700;
    font-size: 1.1em;
    line-height: 1.5;
}

.back-button {
    display: inline-block;
    background: linear-gradient(145deg, #ff0066, #8a2be2);
    color: white;
    padding: 15px 30px;
    text-decoration: none;
    border-radius: 10px;
    font-size: 1.2em;
    margin: 20px 0;
    transition: all 0.3s ease;
    border: 2px solid #ff0066;
}

.back-button:hover {
    background: linear-gradient(145deg, #8a2be2, #ff0066);
    transform: scale(1.05);
    box-shadow: 0 0 20px rgba(255, 0, 102, 0.5);
}

.loading-animation {
    text-align: center;
    margin: 20px 0;
}

.loading-animation::after {
    content: '‚è≥ –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• –¢–û–í–ê–†–ê';
    animation: dots 1.5s steps(4, end) infinite;
}

@keyframes dots {
    0%, 20% { content: '‚è≥ –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• –¢–û–í–ê–†–ê'; }
    40% { content: '‚è≥ –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• –¢–û–í–ê–†–ê.'; }
    60% { content: '‚è≥ –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• –¢–û–í–ê–†–ê..'; }
    80%, 100% { content: '‚è≥ –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• –¢–û–í–ê–†–ê...'; }
}

.mystical-effects {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
}

.particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: #ff0066;
    border-radius: 50%;
    animation: float 10s infinite linear;
}

@keyframes float {
    0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0;
    }
    10% {
        opacity: 1;
    }
    90% {
        opacity: 1;
    }
    100% {
        transform: translateY(-100vh) rotate(720deg);
        opacity: 0;
    }
}
</style>
</head>
<body>

<!-- –ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã -->
<div class="mystical-effects" id="mysticalEffects"></div>

<!-- –ó–≤—É–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
<div id="soundPanel" style="position: fixed; top: 20px; right: 20px; z-index: 1000; background: rgba(0,0,0,0.8); padding: 15px; border-radius: 10px; border: 2px solid #ff0066;">
    <div style="color: #0F0; margin-bottom: 10px;">üîä –ó–≤—É–∫–∏ —Å–∞–π—Ç–∞</div>
    <button onclick="toggleSound()" style="background: #ff0066; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">–í–∫–ª/–í—ã–∫–ª</button>
    <input type="range" id="volumeSlider" min="0" max="100" value="50" style="width: 100px; margin-left: 10px;" onchange="changeVolume(this.value)">
</div>

<div class="product-detail-container">
    <div class="product-header">
        <h1 class="product-title" id="productTitle">–ó–ê–ì–†–£–ó–ö–ê...</h1>
        <div class="loading-animation"></div>
    </div>

    <div class="product-content">
        <div class="product-image">
            <img src="img/product-placeholder.jpg" alt="–¢–æ–≤–∞—Ä" id="productImage">
        </div>
        
        <div class="product-info">
            <div class="product-description" id="productDescription">
                –ó–∞–≥—Ä—É–∑–∫–∞ –æ–ø–∏—Å–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞...
            </div>
            
            <div class="product-price" id="productPrice">
                –¶–µ–Ω–∞: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ...
            </div>
            
            <div class="under-construction">
                <h2>üöß –í –†–ê–ó–†–ê–ë–û–¢–ö–ï üöß</h2>
                <p>
                    <strong>‚ö° –ú–û–©–ù–´–ô –ê–†–¢–ï–§–ê–ö–¢ –í –°–û–ó–î–ê–ù–ò–ò! ‚ö°</strong><br><br>
                    
                    –ù–∞—à–∏ –ª—É—á—à–∏–µ –∞–ª—Ö–∏–º–∏–∫–∏ –∏ —Å—Ç–∞–ª–∫–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞–¥ —ç—Ç–∏–º —Ç–æ–≤–∞—Ä–æ–º –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!<br><br>
                    
                    üìÖ <strong>–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π —Å—Ä–æ–∫ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:</strong> –û—á–µ–Ω—å —Å–∫–æ—Ä–æ<br>
                    üîÆ <strong>–°—Ç–∞—Ç—É—Å —Å–æ–∑–¥–∞–Ω–∏—è:</strong> –ó–∞—Ä—è–∂–∞–µ—Ç—Å—è –º–∏—Å—Ç–∏—á–µ—Å–∫–æ–π —ç–Ω–µ—Ä–≥–∏–µ–π<br>
                    ‚≠ê <strong>–†–µ–¥–∫–æ—Å—Ç—å:</strong> –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è<br><br>
                    
                    <em>–°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ –≤ –ó–æ–Ω–µ...</em>
                </p>
            </div>
            
            <a href="catalog.html" class="back-button">‚Üê –í–ï–†–ù–£–¢–¨–°–Ø –í –ö–ê–¢–ê–õ–û–ì</a>
        </div>
    </div>
</div>

<script>
// –î–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–æ–≤
const products = {
    'svyatoj-vodon': {
        name: '–°–í–Ø–¢–û–ô –í–û–î–û–ù',
        description: '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π —ç–ª–∏–∫—Å–∏—Ä, –æ—á–∏—â–∞—é—â–∏–π –Ω–µ —Ç–æ–ª—å–∫–æ —Ç–µ–ª–æ, –Ω–æ –∏ –¥—É—à—É. –°–æ–∑–¥–∞–Ω –ø–æ –¥—Ä–µ–≤–Ω–µ–º—É —Ä–µ—Ü–µ–ø—Ç—É –∏–∑ –≤–æ–¥—ã —Å–µ–º–∏ —Å–≤—è—â–µ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –ó–æ–Ω—ã.',
        price: '7777 ‚ÇΩ',
        image: 'img/vodon.jpg'
    },
    'sivorotka-svet-radiacii': {
        name: '–°–´–í–û–†–û–¢–ö–ê "–°–í–ï–¢ –†–ê–î–ò–ê–¶–ò–ò"',
        description: '–£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–∞–¥–∏–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å—Ä–µ–¥—Å—Ç–≤–æ. –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ —Å–∞–º—ã–µ –æ–ø–∞—Å–Ω—ã–µ –∞–Ω–æ–º–∞–ª–∏–∏ –±–µ–∑ –≤—Ä–µ–¥–∞ –¥–ª—è –∑–¥–æ—Ä–æ–≤—å—è.',
        price: '13370 ‚ÇΩ',
        image: 'img/sivorotka.jpg'
    },
    'protivogaz-stalkera': {
        name: '–ü–†–û–¢–ò–í–û–ì–ê–ó –°–¢–ê–õ–ö–ï–†–ê',
        description: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è –≤—ã–∂–∏–≤–∞–Ω–∏—è –≤ –ó–æ–Ω–µ. –§–∏–ª—å—Ç—Ä—É–µ—Ç 99.9% –≤—Å–µ—Ö –∞–Ω–æ–º–∞–ª—å–Ω—ã—Ö –≤–µ—â–µ—Å—Ç–≤.',
        price: '8800 ‚ÇΩ',
        image: 'img/protivogaz.jpg'
    },
    'anomalnyj-artefakt': {
        name: '–ê–ù–û–ú–ê–õ–¨–ù–´–ô –ê–†–¢–ï–§–ê–ö–¢',
        description: '–¢–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è. –û–±–ª–∞–¥–∞–µ—Ç –º–∏—Å—Ç–∏—á–µ—Å–∫–∏–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ –∏ –º–µ–Ω—è–µ—Ç —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å –≤–æ–∫—Ä—É–≥ —Å–µ–±—è.',
        price: '25000 ‚ÇΩ',
        image: 'img/artefakt.jpg'
    },
    'energeticheskij-donut': {
        name: '–≠–ù–ï–†–ì–ï–¢–ò–ß–ï–°–ö–ò–ô –î–û–ù–ê–¢',
        description: '–í–∫—É—Å–Ω–µ–π—à–µ–µ –ª–∞–∫–æ–º—Å—Ç–≤–æ, –∑–∞—Ä—è–∂–µ–Ω–Ω–æ–µ —ç–Ω–µ—Ä–≥–∏–µ–π –≤—ã–±—Ä–æ—Å–æ–≤. –î–∞–µ—Ç —Å–∏–ª—ã –Ω–∞ 24 —á–∞—Å–∞ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–≥–æ –≤—ã–∂–∏–≤–∞–Ω–∏—è.',
        price: '666 ‚ÇΩ',
        image: 'img/donut.jpg'
    },
    'karta-tajnyh-prohodov': {
        name: '–ö–ê–†–¢–ê –¢–ê–ô–ù–´–• –ü–†–û–•–û–î–û–í',
        description: '–î–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ –ó–æ–Ω—ã —Å –æ—Ç–º–µ—á–µ–Ω–Ω—ã–º–∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–º–∏ —Ç—Ä–æ–ø–∞–º–∏. –ü–æ–º–æ–∂–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –æ–ø–∞—Å–Ω–æ—Å—Ç–µ–π –∏ –Ω–∞–π—Ç–∏ —Å–æ–∫—Ä–æ–≤–∏—â–∞.',
        price: '15000 ‚ÇΩ',
        image: 'img/karta.jpg'
    }
};

// –ü–æ–ª—É—á–∞–µ–º ID —Ç–æ–≤–∞—Ä–∞ –∏–∑ URL
function getProductId() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('id') || 'svyatoj-vodon';
}

// –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ 10-—Å–µ–∫—É–Ω–¥–Ω–æ–≥–æ –∑–≤—É–∫–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ
function playProductEntrySound() {
    if (window.soundManager) {
        // –°–æ–∑–¥–∞–µ–º 10-—Å–µ–∫—É–Ω–¥–Ω—ã–π –º–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∑–≤—É–∫
        const duration = 10; // 10 —Å–µ–∫—É–Ω–¥
        const sampleRate = 44100;
        const numSamples = duration * sampleRate;
        
        const audioContext = window.soundManager.audioContext;
        const buffer = audioContext.createBuffer(1, numSamples, sampleRate);
        const data = buffer.getChannelData(0);
        
        // –°–æ–∑–¥–∞–µ–º –º–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∑–≤—É–∫ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —á–∞—Å—Ç–æ—Ç–∞–º–∏
        for (let i = 0; i < numSamples; i++) {
            const t = i / sampleRate;
            const envelope = Math.exp(-t * 0.3); // –ó–∞—Ç—É—Ö–∞–Ω–∏–µ
            
            // –û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ + –≥–∞—Ä–º–æ–Ω–∏–∫–∏
            data[i] = envelope * (
                Math.sin(2 * Math.PI * 220 * t) * 0.3 +  // A3
                Math.sin(2 * Math.PI * 440 * t) * 0.2 +  // A4
                Math.sin(2 * Math.PI * 880 * t) * 0.1 +  // A5
                Math.sin(2 * Math.PI * 110 * t) * 0.4    // A2
            ) * Math.sin(t * 0.5); // –ú–µ–¥–ª–µ–Ω–Ω–∞—è –º–æ–¥—É–ª—è—Ü–∏—è
        }
        
        const source = audioContext.createBufferSource();
        source.buffer = buffer;
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–≤–µ—Ä–±–µ—Ä–∞—Ü–∏—é –¥–ª—è –º–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞
        const convolver = audioContext.createConvolver();
        const reverbLength = audioContext.sampleRate * 2; // 2 —Å–µ–∫—É–Ω–¥—ã —Ä–µ–≤–µ—Ä–±–µ—Ä–∞—Ü–∏–∏
        const reverbBuffer = audioContext.createBuffer(2, reverbLength, audioContext.sampleRate);
        
        for (let channel = 0; channel < 2; channel++) {
            const channelData = reverbBuffer.getChannelData(channel);
            for (let i = 0; i < reverbLength; i++) {
                channelData[i] = (Math.random() * 2 - 1) * Math.pow(1 - i / reverbLength, 2);
            }
        }
        
        convolver.buffer = reverbBuffer;
        
        source.connect(convolver);
        convolver.connect(audioContext.destination);
        
        source.start();
        
        console.log('üéµ –ü—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç—Å—è 10-—Å–µ–∫—É–Ω–¥–Ω—ã–π –º–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∑–≤—É–∫ —Ç–æ–≤–∞—Ä–∞');
    }
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞
function loadProduct() {
    const productId = getProductId();
    const product = products[productId];
    
    if (product) {
        document.getElementById('productTitle').textContent = product.name;
        document.getElementById('productDescription').textContent = product.description;
        document.getElementById('productPrice').textContent = `–¶–µ–Ω–∞: ${product.price}`;
        document.getElementById('productImage').src = product.image;
        document.getElementById('productImage').alt = product.name;
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.title = `${product.name} - –ß–£–î–û-–ë–ê–ó–ê–† "–°–≤—è—Ç–æ–π –ê–ª—Ç–∞—Ä—å"`;
        
        // –ü—Ä–æ–∏–≥—Ä—ã–≤–∞–µ–º –∑–≤—É–∫
        playProductEntrySound();
    } else {
        document.getElementById('productTitle').textContent = '–¢–û–í–ê–† –ù–ï –ù–ê–ô–î–ï–ù';
        document.getElementById('productDescription').textContent = '–¢–∞–∫–æ–π —Ç–æ–≤–∞—Ä –∏—Å—á–µ–∑ –≤ –∞–Ω–æ–º–∞–ª–∏–∏...';
        document.getElementById('productPrice').textContent = '–¶–µ–Ω–∞: –±–µ—Å—Ü–µ–Ω–Ω–æ';
    }
}

// –°–æ–∑–¥–∞–Ω–∏–µ –º–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —á–∞—Å—Ç–∏—Ü
function createMysticalParticles() {
    const container = document.getElementById('mysticalEffects');
    
    for (let i = 0; i < 20; i++) {
        setTimeout(() => {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 10 + 's';
            particle.style.animationDuration = (10 + Math.random() * 10) + 's';
            container.appendChild(particle);
        }, i * 200);
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', () => {
    loadProduct();
    createMysticalParticles();
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —á–∞—Å—Ç–∏—Ü—ã –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
    setInterval(createMysticalParticles, 30000);
});

// –§—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–≤—É–∫–æ–º
function toggleSound() {
    if (window.soundManager) {
        window.soundManager.toggleEnabled();
    }
}

function changeVolume(value) {
    if (window.soundManager) {
        window.soundManager.setVolume(value / 100);
    }
}
</script>

</body>
</html>
