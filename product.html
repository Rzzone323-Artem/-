<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>{{PRODUCT_NAME}} - –ß–£–î–û-–ë–ê–ó–ê–† "–°–≤—è—Ç–æ–π –ê–ª—Ç–∞—Ä—å"</title>
<link rel="stylesheet" href="style.css">
<script src="sounds.js"></script>
<style>
.product-detail-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
    background: linear-gradient(145deg, rgba(0,0,0,0.9), rgba(20,0,20,0.9));
    border: 3px solid #ff0066;
    border-radius: 15px;
    margin-top: 20px;
}

.product-header {
    text-align: center;
    margin-bottom: 40px;
}

.product-title {
    font-size: 3em;
    color: #ff0066;
    text-shadow: 0 0 20px #ff0066;
    margin-bottom: 20px;
    animation: glow 2s ease-in-out infinite alternate;
}

@keyframes glow {
    from { text-shadow: 0 0 20px #ff0066; }
    to { text-shadow: 0 0 30px #ff0066, 0 0 40px #ff0066; }
}

.product-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    align-items: center;
}

.product-image {
    text-align: center;
}

.product-image img {
    max-width: 100%;
    height: 400px;
    object-fit: cover;
    border: 3px solid #8a2be2;
    border-radius: 10px;
    box-shadow: 0 0 30px rgba(138, 43, 226, 0.5);
}

.product-info {
    color: #0F0;
    font-family: "Courier New", monospace;
}

.product-description {
    font-size: 1.2em;
    line-height: 1.6;
    margin-bottom: 30px;
}

.product-price {
    font-size: 2em;
    color: #FFD700;
    text-shadow: 0 0 15px #FFD700;
    margin-bottom: 30px;
}

.under-construction {
    background: linear-gradient(145deg, rgba(255,0,0,0.1), rgba(255,165,0,0.1));
    border: 2px solid #FF4500;
    border-radius: 10px;
    padding: 30px;
    text-align: center;
    margin: 30px 0;
}

.under-construction h2 {
    color: #FF4500;
    font-size: 2em;
    margin-bottom: 15px;
    animation: blink 1s infinite;
}

@keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0.5; }
}

.under-construction p {
    color: #FFD700;
    font-size: 1.1em;
    line-height: 1.5;
}

.back-button {
    display: inline-block;
    background: linear-gradient(145deg, #ff0066, #8a2be2);
    color: white;
    padding: 15px 30px;
    text-decoration: none;
    border-radius: 10px;
    font-size: 1.2em;
    margin: 20px 0;
    transition: all 0.3s ease;
    border: 2px solid #ff0066;
}

.back-button:hover {
    background: linear-gradient(145deg, #8a2be2, #ff0066);
    transform: scale(1.05);
    box-shadow: 0 0 20px rgba(255, 0, 102, 0.5);
}

.loading-animation {
    text-align: center;
    margin: 20px 0;
}

.loading-animation::after {
    content: '‚è≥ –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• –¢–û–í–ê–†–ê';
    animation: dots 1.5s steps(4, end) infinite;
}

@keyframes dots {
    0%, 20% { content: '‚è≥ –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• –¢–û–í–ê–†–ê'; }
    40% { content: '‚è≥ –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• –¢–û–í–ê–†–ê.'; }
    60% { content: '‚è≥ –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• –¢–û–í–ê–†–ê..'; }
    80%, 100% { content: '‚è≥ –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• –¢–û–í–ê–†–ê...'; }
}

.mystical-effects {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
}

.particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: #ff0066;
    border-radius: 50%;
    animation: float 10s infinite linear;
}

@keyframes float {
    0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0;
    }
    10% {
        opacity: 1;
    }
    90% {
        opacity: 1;
    }
    100% {
        transform: translateY(-100vh) rotate(720deg);
        opacity: 0;
    }
}
</style>
</head>
<body>

<!-- –ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã -->
<div class="mystical-effects" id="mysticalEffects"></div>

<!-- –ó–≤—É–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
<div id="soundPanel" style="position: fixed; top: 20px; right: 20px; z-index: 1000; background: rgba(0,0,0,0.8); padding: 15px; border-radius: 10px; border: 2px solid #ff0066;">
    <div style="color: #0F0; margin-bottom: 10px;">üîä –ó–≤—É–∫–∏ —Å–∞–π—Ç–∞</div>
    <button onclick="toggleSound()" style="background: #ff0066; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">–í–∫–ª/–í—ã–∫–ª</button>
    <input type="range" id="volumeSlider" min="0" max="100" value="50" style="width: 100px; margin-left: 10px;" onchange="changeVolume(this.value)">
</div>

<div class="product-detail-container">
    <div class="product-header">
        <h1 class="product-title" id="productTitle">–ó–ê–ì–†–£–ó–ö–ê...</h1>
        <div class="loading-animation"></div>
    </div>

    <div class="product-content">
        <div class="product-image">
            <img src="img/product-placeholder.jpg" alt="–¢–æ–≤–∞—Ä" id="productImage">
        </div>
        
        <div class="product-info">
            <div class="product-description" id="productDescription">
                –ó–∞–≥—Ä—É–∑–∫–∞ –æ–ø–∏—Å–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞...
            </div>
            
            <div class="product-price" id="productPrice">
                –¶–µ–Ω–∞: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ...
            </div>
            
            <div class="under-construction">
                <h2>üöß –í –†–ê–ó–†–ê–ë–û–¢–ö–ï üöß</h2>
                <p>
                    <strong>‚ö° –ú–û–©–ù–´–ô –ê–†–¢–ï–§–ê–ö–¢ –í –°–û–ó–î–ê–ù–ò–ò! ‚ö°</strong><br><br>
                    
                    –ù–∞—à–∏ –ª—É—á—à–∏–µ –∞–ª—Ö–∏–º–∏–∫–∏ –∏ —Å—Ç–∞–ª–∫–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞–¥ —ç—Ç–∏–º —Ç–æ–≤–∞—Ä–æ–º –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!<br><br>
                    
                    üìÖ <strong>–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π —Å—Ä–æ–∫ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:</strong> –û—á–µ–Ω—å —Å–∫–æ—Ä–æ<br>
                    üîÆ <strong>–°—Ç–∞—Ç—É—Å —Å–æ–∑–¥–∞–Ω–∏—è:</strong> –ó–∞—Ä—è–∂–∞–µ—Ç—Å—è –º–∏—Å—Ç–∏—á–µ—Å–∫–æ–π —ç–Ω–µ—Ä–≥–∏–µ–π<br>
                    ‚≠ê <strong>–†–µ–¥–∫–æ—Å—Ç—å:</strong> –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è<br><br>
                    
                    <em>–°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ –≤ –ó–æ–Ω–µ...</em>
                </p>
            </div>
            
            <a href="catalog.html" class="back-button">‚Üê –í–ï–†–ù–£–¢–¨–°–Ø –í –ö–ê–¢–ê–õ–û–ì</a>
        </div>
    </div>
</div>

<div class="menu">
<a href="index.html">üè† –ì–õ–ê–í–ù–ê–Ø</a> |
<a href="catalog.html">üì¶ –ö–ê–¢–ê–õ–û–ì</a> |
<a href="amulets.html">üîÆ –ê–ú–£–õ–ï–¢–´</a> |
<a href="horoscope.html">üåü –ì–û–†–û–°–ö–û–ü–´</a> |
<a href="forum.html">üí¨ –§–û–†–£–ú</a> |
<a href="about.html">üìñ –û –ù–ê–°</a> |
<a href="contacts.html">üìû –ö–û–ù–¢–ê–ö–¢–´</a>
</div>

<script>
// –î–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–æ–≤
const products = {
    'svyatoj-vodon': {
        name: '–°–í–Ø–¢–û–ô –í–û–î–û–ù',
        description: '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π —ç–ª–∏–∫—Å–∏—Ä, –æ—á–∏—â–∞—é—â–∏–π –Ω–µ —Ç–æ–ª—å–∫–æ —Ç–µ–ª–æ, –Ω–æ –∏ –¥—É—à—É. –°–æ–∑–¥–∞–Ω –ø–æ –¥—Ä–µ–≤–Ω–µ–º—É —Ä–µ—Ü–µ–ø—Ç—É –∏–∑ –≤–æ–¥—ã —Å–µ–º–∏ —Å–≤—è—â–µ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –ó–æ–Ω—ã.',
        price: '7777 ‚ÇΩ',
        image: 'img/vodon.jpg'
    },
    'sivorotka-svet-radiacii': {
        name: '–°–´–í–û–†–û–¢–ö–ê "–°–í–ï–¢ –†–ê–î–ò–ê–¶–ò–ò"',
        description: '–£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–∞–¥–∏–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å—Ä–µ–¥—Å—Ç–≤–æ. –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ —Å–∞–º—ã–µ –æ–ø–∞—Å–Ω—ã–µ –∞–Ω–æ–º–∞–ª–∏–∏ –±–µ–∑ –≤—Ä–µ–¥–∞ –¥–ª—è –∑–¥–æ—Ä–æ–≤—å—è.',
        price: '13370 ‚ÇΩ',
        image: 'img/sivorotka.jpg'
    },
    'protivogaz-stalkera': {
        name: '–ü–†–û–¢–ò–í–û–ì–ê–ó –°–¢–ê–õ–ö–ï–†–ê',
        description: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è –≤—ã–∂–∏–≤–∞–Ω–∏—è –≤ –ó–æ–Ω–µ. –§–∏–ª—å—Ç—Ä—É–µ—Ç 99.9% –≤—Å–µ—Ö –∞–Ω–æ–º–∞–ª—å–Ω—ã—Ö –≤–µ—â–µ—Å—Ç–≤.',
        price: '8800 ‚ÇΩ',
        image: 'img/protivogaz.jpg'
    },
    'anomalnyj-artefakt': {
        name: '–ê–ù–û–ú–ê–õ–¨–ù–´–ô –ê–†–¢–ï–§–ê–ö–¢',
        description: '–¢–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è. –û–±–ª–∞–¥–∞–µ—Ç –º–∏—Å—Ç–∏—á–µ—Å–∫–∏–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ –∏ –º–µ–Ω—è–µ—Ç —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å –≤–æ–∫—Ä—É–≥ —Å–µ–±—è.',
        price: '25000 ‚ÇΩ',
        image: 'img/artefakt.jpg'
    },
    'kristall-vremeni': {
        name: '–ö–†–ò–°–¢–ê–õ–õ –í–†–ï–ú–ï–ù–ò',
        description: '–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∫—Ä–∏—Å—Ç–∞–ª–ª, —Å–ø–æ—Å–æ–±–Ω—ã–π –∑–∞–º–µ–¥–ª—è—Ç—å –≤—Ä–µ–º—è –≤–æ–∫—Ä—É–≥ –≤–ª–∞–¥–µ–ª—å—Ü–∞. –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤–∏–¥–µ—Ç—å –±—É–¥—É—â–µ–µ –Ω–∞ 5 —Å–µ–∫—É–Ω–¥ –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è.',
        price: '3500 ‚ÇΩ',
        image: 'img/kristall.jpg'
    },
    'karta-tajnyh-prohodov': {
        name: '–ö–ê–†–¢–ê –¢–ê–ô–ù–´–• –ü–†–û–•–û–î–û–í',
        description: '–î–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ –ó–æ–Ω—ã —Å –æ—Ç–º–µ—á–µ–Ω–Ω—ã–º–∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–º–∏ —Ç—Ä–æ–ø–∞–º–∏. –ü–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –æ–ø–∞—Å–Ω–æ—Å—Ç–µ–π –∏ –Ω–∞–π—Ç–∏ —Å–æ–∫—Ä–æ–≤–∏—â–∞.',
        price: '15000 ‚ÇΩ',
        image: 'img/karta.jpg'
    },
    'kost-ploti': {
        name: '–ö–û–°–¢–¨ –ü–õ–û–¢–ò',
        description: '–ú–æ—â–Ω—ã–π –∞–º—É–ª–µ—Ç –∏–∑ –∫–æ—Å—Ç–∏ –∑–∞–≥–∞–¥–æ—á–Ω–æ–≥–æ —Å—É—â–µ—Å—Ç–≤–∞. –£—Å–∏–ª–∏–≤–∞–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫—É—é —Å–∏–ª—É –∏ –ø—Ä–∏–≤–ª–µ–∫–∞–µ—Ç –º—É—Ç–∞–Ω—Ç–æ–≤.',
        price: '666 ‚ÇΩ',
        image: 'img/kost.jpg'
    },
    'glaz-slepogo-psa': {
        name: '–ì–õ–ê–ó –°–õ–ï–ü–û–ì–û –ü–°–ê',
        description: '–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–º—É–ª–µ—Ç, –¥–∞—Ä—É—é—â–∏–π –Ω–æ—á–Ω–æ–µ –∑—Ä–µ–Ω–∏–µ –∏ –ø–æ–º–æ–≥–∞—é—â–∏–π –≤–∏–¥–µ—Ç—å —Å–∫—Ä—ã—Ç—ã–µ –∞–Ω–æ–º–∞–ª–∏–∏.',
        price: '420 ‚ÇΩ',
        image: 'img/glaz.jpg'
    },
    'shnurok-udachi': {
        name: '–®–ù–£–†–û–ö –£–î–ê–ß–ò',
        description: '–ü—Ä–æ—Å—Ç–æ–π –Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∞–º—É–ª–µ—Ç –¥–ª—è –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è —É–¥–∞—á–∏. –ü–æ–º–æ–≥–∞–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å —Ü–µ–Ω–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã.',
        price: '111 ‚ÇΩ',
        image: 'img/shnurok.jpg'
    },
    'amulet-kogtya': {
        name: '–ê–ú–£–õ–ï–¢ –ò–ó –ö–û–ì–¢–Ø –ù–ï–í–ò–î–ò–ú–û–ì–û –ú–£–¢–ê–ù–¢–ê',
        description: '–ó–∞—â–∏—â–∞–µ—Ç –æ—Ç —Å–≥–ª–∞–∑–∞, –Ω–∞–ª–æ–≥–æ–≤–æ–π –∏–Ω—Å–ø–µ–∫—Ü–∏–∏ –∏ –±—ã–≤—à–∏—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤. –ú–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –Ω–µ–≤–∏–¥–∏–º—ã–º.',
        price: '1800 ‚ÇΩ',
        image: 'img/kogot.jpg'
    },
    'talisman-udacha': {
        name: '–¢–ê–õ–ò–°–ú–ê–ù "–£–î–ê–ß–ê –°–¢–ê–õ–ö–ï–†–ê"',
        description: '–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —à–∞–Ω—Å –Ω–∞–π—Ç–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –Ω–∞ 73%. –¢—è–Ω–µ—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∫ —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –º–µ—Å—Ç–∞–º.',
        price: '2100 ‚ÇΩ',
        image: 'img/talisman.jpg'
    },
    'obereg-zashita': {
        name: '–û–ë–ï–†–ï–ì "–ó–ê–©–ò–¢–ê –û–¢ –°–ì–õ–ê–ó–ê"',
        description: '–ú–æ—â–Ω—ã–π –æ–±–µ—Ä–µ–≥, –±–ª–æ–∫–∏—Ä—É—é—â–∏–π –º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∞—Ç–∞–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª—ë—Ä–æ–≤ –∏ –¥—Ä—É–≥–∏—Ö –æ–ø–∞—Å–Ω—ã—Ö —Å—É—â–µ—Å—Ç–≤.',
        price: '1300 ‚ÇΩ',
        image: 'img/obereg.jpg'
    },
    'kulon-energiya': {
        name: '–ö–£–õ–û–ù "–≠–ù–ï–†–ì–ò–Ø –ó–û–ù–´"',
        description: '–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å –∏ —Å–Ω–∏–∂–∞–µ—Ç —É—Ç–æ–º–ª—è–µ–º–æ—Å—Ç—å. –î–∞–µ—Ç —ç–Ω–µ—Ä–≥–∏—é –¥–ª—è –¥–æ–ª–≥–∏—Ö –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π.',
        price: '2500 ‚ÇΩ',
        image: 'img/kulon.jpg'
    },
    'runa-put': {
        name: '–†–£–ù–ê "–ü–£–¢–¨ –ö –í–´–•–û–î–£"',
        description: '–î—Ä–µ–≤–Ω—è—è —Ä—É–Ω–∞, –ø–æ–º–æ–≥–∞—é—â–∞—è –Ω–∞—Ö–æ–¥–∏—Ç—å –≤—ã—Ö–æ–¥ –∏–∑ –ª–∞–±–∏—Ä–∏–Ω—Ç–æ–≤ –∏ –ø–µ—â–µ—Ä. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å.',
        price: '1900 ‚ÇΩ',
        image: 'img/runa.jpg'
    }
};

// –ü–æ–ª—É—á–∞–µ–º ID —Ç–æ–≤–∞—Ä–∞ –∏–∑ URL
function getProductId() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('id') || 'svyatoj-vodon';
}

// –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –£–ù–ò–ö–ê–õ–¨–ù–û–ì–û 10-—Å–µ–∫—É–Ω–¥–Ω–æ–≥–æ –∑–≤—É–∫–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
function playProductEntrySound(productId) {
    const resolvedProductId = productId || getProductId();
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    const duration = 10; // 10 —Å–µ–∫—É–Ω–¥
    const sampleRate = 44100;
    const numSamples = duration * sampleRate;
    
    const buffer = audioContext.createBuffer(1, numSamples, sampleRate);
    const data = buffer.getChannelData(0);
    
    // –£–ù–ò–ö–ê–õ–¨–ù–´–ï –∑–≤—É–∫–æ–≤—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
    const soundProfiles = {
        'svyatoj-vodon': {
            freq: 349, // F4 - —Å–≤—è—â–µ–Ω–Ω—ã–π
            harmonics: [1, 2, 3, 5], // –∫–≤–∏–Ω—Ç–æ–≤—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
            modulation: 0.3,
            filter: 'lowpass',
            description: '–°–≤—è—Ç–æ–π –í–æ–¥–æ–Ω - —Å–≤—è—â–µ–Ω–Ω—ã–π, –≥–∞—Ä–º–æ–Ω–∏—á–Ω—ã–π'
        },
        'sivorotka-svet-radiacii': {
            freq: 523, // C5 - —è—Ä–∫–∏–π, —á–∏—Å—Ç—ã–π
            harmonics: [1, 2, 4, 6], // —É–ª—É—á—à–µ–Ω–Ω—ã–µ –≥–∞—Ä–º–æ–Ω–∏–∫–∏
            modulation: 0.4,
            filter: 'highpass',
            description: '–°—ã–≤–æ—Ä–æ—Ç–∫–∞ - —è—Ä–∫–∏–π, —á–∏—Å—Ç—ã–π'
        },
        'protivogaz-stalkera': {
            freq: 293, // D4 - –∑–∞—â–∏—Ç–Ω—ã–π, –Ω–∞–¥–µ–∂–Ω—ã–π (–£–õ–£–ß–®–ï–ù!)
            harmonics: [1, 2, 3], // –ø—Ä–æ—Å—Ç—ã–µ –≥–∞—Ä–º–æ–Ω–∏–∫–∏
            modulation: 0.5,
            filter: 'lowpass',
            description: '–ü—Ä–æ—Ç–∏–≤–æ–≥–∞–∑ - –∑–∞—â–∏—Ç–Ω—ã–π, –Ω–∞–¥–µ–∂–Ω—ã–π'
        },
        'anomalnyj-artefakt': {
            freq: 110, // A2 - –≥–ª—É–±–æ–∫–∏–π, —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π
            harmonics: [1, 1.618, 2.618], // –∑–æ–ª–æ—Ç–æ–µ —Å–µ—á–µ–Ω–∏–µ
            modulation: 0.8,
            filter: 'bandpass',
            description: '–ê—Ä—Ç–µ—Ñ–∞–∫—Ç - –¥—Ä–µ–≤–Ω–∏–π, –∑–∞–≥–∞–¥–æ—á–Ω—ã–π'
        },
        'kristall-vremeni': {
            freq: 432, // A4 - –º–∏—Å—Ç–∏—á–µ—Å–∫–∏–π, –∫—Ä–∏—Å—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π
            harmonics: [1, 2, 4, 8, 16], // –æ–∫—Ç–∞–≤–Ω—ã–µ –≥–∞—Ä–º–æ–Ω–∏–∫–∏
            modulation: 0.5,
            filter: 'bandpass',
            description: '–ö—Ä–∏—Å—Ç–∞–ª–ª –≤—Ä–µ–º–µ–Ω–∏ - –º–∏—Å—Ç–∏—á–µ—Å–∫–∏–π, –∫—Ä–∏—Å—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π'
        },
        'karta-tajnyh-prohodov': {
            freq: 392, // G4 - –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π (–£–õ–£–ß–®–ï–ù!)
            harmonics: [1, 2, 4, 5], // —É–ª—É—á—à–µ–Ω–Ω—ã–µ –≥–∞—Ä–º–æ–Ω–∏–∫–∏
            modulation: 0.4,
            filter: 'bandpass',
            description: '–ö–∞—Ä—Ç–∞ - –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π, —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π'
        },
        // –ê–ú–£–õ–ï–¢–´
        'kost-ploti': {
            freq: 196, // G3 - –º–æ—â–Ω—ã–π, –∑–µ–º–Ω–æ–π
            harmonics: [1, 2, 3],
            modulation: 0.7,
            filter: 'lowpass',
            description: '–ö–æ—Å—Ç—å –ø–ª–æ—Ç–∏ - –º–æ—â–Ω—ã–π, –∑–µ–º–Ω–æ–π'
        },
        'glaz-slepogo-psa': {
            freq: 330, // E4 - –º–∏—Å—Ç–∏—á–µ—Å–∫–∏–π, –ø—Ä–æ–Ω–∏–∫–∞—é—â–∏–π
            harmonics: [1, 3, 5],
            modulation: 0.5,
            filter: 'bandpass',
            description: '–ì–ª–∞–∑ —Å–ª–µ–ø–æ–≥–æ –ø—Å–∞ - –º–∏—Å—Ç–∏—á–µ—Å–∫–∏–π, –ø—Ä–æ–Ω–∏–∫–∞—é—â–∏–π'
        },
        'shnurok-udachi': {
            freq: 587, // D5 - –ª–µ–≥–∫–∏–π, –≤–æ–∑–¥—É—à–Ω—ã–π
            harmonics: [1, 2, 4],
            modulation: 0.3,
            filter: 'highpass',
            description: '–®–Ω—É—Ä–æ–∫ —É–¥–∞—á–∏ - –ª–µ–≥–∫–∏–π, –≤–æ–∑–¥—É—à–Ω—ã–π'
        },
        'amulet-kogtya': {
            freq: 220, // A3 - –∑–∞—â–∏—Ç–Ω—ã–π, –æ—Å—Ç—Ä—ã–π
            harmonics: [1, 1.5, 2.5],
            modulation: 0.6,
            filter: 'bandpass',
            description: '–ê–º—É–ª–µ—Ç –∏–∑ –∫–æ–≥—Ç—è - –∑–∞—â–∏—Ç–Ω—ã–π, –æ—Å—Ç—Ä—ã–π'
        },
        'talisman-udacha': {
            freq: 440, // A4 - —É–¥–∞—á–ª–∏–≤—ã–π, –≥–∞—Ä–º–æ–Ω–∏—á–Ω—ã–π
            harmonics: [1, 2, 3, 5],
            modulation: 0.4,
            filter: 'lowpass',
            description: '–¢–∞–ª–∏—Å–º–∞–Ω —É–¥–∞—á–∏ - —É–¥–∞—á–ª–∏–≤—ã–π, –≥–∞—Ä–º–æ–Ω–∏—á–Ω—ã–π'
        },
        'obereg-zashita': {
            freq: 293, // D4 - –æ–±–µ—Ä–µ–≥–∞—é—â–∏–π, —Å–ø–æ–∫–æ–π–Ω—ã–π
            harmonics: [1, 2, 4],
            modulation: 0.8,
            filter: 'lowpass',
            description: '–û–±–µ—Ä–µ–≥ –∑–∞—â–∏—Ç—ã - –æ–±–µ—Ä–µ–≥–∞—é—â–∏–π, —Å–ø–æ–∫–æ–π–Ω—ã–π'
        },
        'kulon-energiya': {
            freq: 784, // G5 - —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π, –≤–∏–±—Ä–∏—Ä—É—é—â–∏–π
            harmonics: [1, 3, 6],
            modulation: 0.2,
            filter: 'highpass',
            description: '–ö—É–ª–æ–Ω —ç–Ω–µ—Ä–≥–∏–∏ - —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π, –≤–∏–±—Ä–∏—Ä—É—é—â–∏–π'
        },
        'runa-put': {
            freq: 349, // F4 - –≤–µ–¥—É—â–∏–π, –Ω–∞–ø—Ä–∞–≤–ª—è—é—â–∏–π
            harmonics: [1, 2.5, 4],
            modulation: 0.5,
            filter: 'bandpass',
            description: '–†—É–Ω–∞ –ø—É—Ç–∏ - –≤–µ–¥—É—â–∏–π, –Ω–∞–ø—Ä–∞–≤–ª—è—é—â–∏–π'
        }
    };
    
    const profile = soundProfiles[resolvedProductId] || soundProfiles['svyatoj-vodon'];
    
    // –°–æ–∑–¥–∞–µ–º –£–ù–ò–ö–ê–õ–¨–ù–´–ô –∑–≤—É–∫ –¥–ª—è —Ç–æ–≤–∞—Ä–∞
    for (let i = 0; i < numSamples; i++) {
        const t = i / sampleRate;
        const envelope = Math.exp(-t * 0.3); // –ó–∞—Ç—É—Ö–∞–Ω–∏–µ
        
        let sample = 0;
        profile.harmonics.forEach((harmonic, index) => {
            const harmonicFreq = profile.freq * harmonic;
            const harmonicVolume = 1 / (index + 1);
            const phase = Math.random() * Math.PI * 2; // –°–ª—É—á–∞–π–Ω–∞—è —Ñ–∞–∑–∞
            sample += Math.sin(2 * Math.PI * harmonicFreq * t + phase) * harmonicVolume;
        });
        
        // –£–Ω–∏–∫–∞–ª—å–Ω–∞—è –º–æ–¥—É–ª—è—Ü–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
        const modulation1 = Math.sin(2 * Math.PI * profile.modulation * t);
        const modulation2 = Math.sin(2 * Math.PI * profile.modulation * 0.3 * t);
        const vibrato = Math.sin(2 * Math.PI * 3 * t) * 0.1; // –í–∏–±—Ä–∞—Ç–æ
        
        data[i] = envelope * sample * (0.5 + 0.3 * modulation1 + 0.2 * modulation2) * (1 + vibrato);
    }
    
    const source = audioContext.createBufferSource();
    source.buffer = buffer;
    
    // –£–ù–ò–ö–ê–õ–¨–ù–´–ô —Ñ–∏–ª—å—Ç—Ä –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
    const filter = audioContext.createBiquadFilter();
    filter.type = profile.filter;
    filter.frequency.value = profile.freq * 2;
    filter.Q.value = 5; // –†–µ–∑–æ–Ω–∞–Ω—Å –¥–ª—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞
    
    // –ì–õ–ê–í–ù–û–ï: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥—Ä–æ–º–∫–æ—Å—Ç—å 0.1!
    const gainNode = audioContext.createGain();
    gainNode.gain.value = 0.1; // –¢–∏—Ö–∞—è –≥—Ä–æ–º–∫–æ—Å—Ç—å
    
    // –†–µ–≤–µ—Ä–±–µ—Ä–∞—Ü–∏—è –¥–ª—è –º–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞
    const convolver = audioContext.createConvolver();
    const reverbLength = audioContext.sampleRate * 2; // 2 —Å–µ–∫—É–Ω–¥—ã —Ä–µ–≤–µ—Ä–±–µ—Ä–∞—Ü–∏–∏
    const reverbBuffer = audioContext.createBuffer(2, reverbLength, audioContext.sampleRate);
    
    for (let channel = 0; channel < 2; channel++) {
        const channelData = reverbBuffer.getChannelData(channel);
        for (let i = 0; i < reverbLength; i++) {
            channelData[i] = (Math.random() * 2 - 1) * Math.pow(1 - i / reverbLength, 2);
        }
    }
    
    convolver.buffer = reverbBuffer;
    
    // –°–æ–µ–¥–∏–Ω—è–µ–º —É–∑–ª—ã
    source.connect(filter);
    filter.connect(gainNode);
    gainNode.connect(convolver);
    convolver.connect(audioContext.destination);
    gainNode.connect(audioContext.destination); // –ü—Ä—è–º–æ–π —Å–∏–≥–Ω–∞–ª
    
    source.start();
    
    console.log(`üéµ ${profile.description} - 10-—Å–µ–∫—É–Ω–¥–Ω—ã–π –∑–≤—É–∫ —Ç–æ–≤–∞—Ä–∞`);
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞
function loadProduct() {
    const productId = getProductId();
    const product = products[productId];
    
    if (product) {
        document.getElementById('productTitle').textContent = product.name;
        document.getElementById('productDescription').textContent = product.description;
        document.getElementById('productPrice').textContent = `–¶–µ–Ω–∞: ${product.price}`;
        document.getElementById('productImage').src = product.image;
        document.getElementById('productImage').alt = product.name;
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.title = `${product.name} - –ß–£–î–û-–ë–ê–ó–ê–† "–°–≤—è—Ç–æ–π –ê–ª—Ç–∞—Ä—å"`;
        
        // –ü—Ä–æ–∏–≥—Ä—ã–≤–∞–µ–º –∑–≤—É–∫
        playProductEntrySound(productId);
    } else {
        document.getElementById('productTitle').textContent = '–¢–û–í–ê–† –ù–ï –ù–ê–ô–î–ï–ù';
        document.getElementById('productDescription').textContent = '–¢–∞–∫–æ–π —Ç–æ–≤–∞—Ä –∏—Å—á–µ–∑ –≤ –∞–Ω–æ–º–∞–ª–∏–∏...';
        document.getElementById('productPrice').textContent = '–¶–µ–Ω–∞: –±–µ—Å—Ü–µ–Ω–Ω–æ';
    }
}

// –ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—Ä–∞–∑—ã –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü —Ç–æ–≤–∞—Ä–æ–≤
const phrases = [
    "–ü–†–û–°–ù–ò–°–¨",
    "–ó–ï–ú–õ–Ø –ü–õ–û–°–ö–ê–Ø",
    "–ù–ï –í–ï–†–¨ –ì–õ–ê–ó–ê–ú",
    "–¢–†–ï–¢–ò–ô –ì–õ–ê–ó –û–¢–ö–†–´–¢",
    "–í–ï–ß–ù–û–°–¢–¨ –ë–õ–ò–ó–ö–û",
    "–°–õ–ï–î–£–ô –ó–ê –ó–í–ï–ó–î–û–ô",
    "–ó–û–ù–ê –í–´–ó–´–í–ê–ï–¢",
    "–ú–£–î–†–û–°–¢–¨ –í –¢–ò–®–ò–ù–ï",
    "–≠–ù–ï–†–ì–ò–Ø –ß–ï–†–ï–ó –ö–†–ê–ô",
    "–ü–û–†–û–ì –ù–ï–í–ò–î–ò–ú",
    "–ò–°–¢–ò–ù–ê –í–ù–£–¢–†–ò",
    "–°–í–ï–¢ –í–û –¢–¨–ú–ï",
    "–í–†–ï–ú–Ø –ò–õ–õ–Æ–ó–ò–Ø",
    "–ó–ù–ê–ù–ò–ï –°–ò–õ–ê",
    // –ù–û–í–´–ï –§–†–ê–ó–´:
    "–ö–í–ê–ù–¢–û–í–´–ô –ü–ï–†–ï–•–û–î",
    "–°–û–ó–ù–ê–ù–ò–ï –ú–ï–ù–Ø–ï–¢–°–Ø",
    "–†–ï–ê–õ–¨–ù–û–°–¢–¨ –ò–õ–õ–Æ–ó–ò–Ø",
    "–í–ò–ë–†–ê–¶–ò–ò –í–°–ï–õ–ï–ù–ù–û–ô",
    "–ü–û–†–¢–ê–õ –û–¢–ö–†–´–¢",
    "–ß–ï–¢–í–ï–†–¢–û–ï –ò–ó–ú–ï–†–ï–ù–ò–ï",
    "–ê–ö–ê–®–ò–ß–ï–°–ö–ò–ï –ó–ê–ü–ò–°–ò",
    "–ü–Ø–¢–ê–Ø –°–¢–ò–•–ò–Ø –û–¢–ö–†–´–¢–ê",
    "–≠–ù–ï–†–ì–ï–¢–ò–ß–ï–°–ö–ò–ô –ü–û–¢–û–ö",
    "–ö–û–°–ú–ò–ß–ï–°–ö–ê–Ø –°–í–Ø–ó–¨",
    "–ü–ê–†–ê–õ–õ–ï–õ–¨–ù–´–ô –ú–ò–†",
    "–ú–ù–û–ñ–ï–°–¢–í–ï–ù–ù–û–°–¢–¨ –†–ï–ê–õ–¨–ù–û–°–¢–ï–ô",
    "–ò–ù–§–û–†–ú–ê–¶–ò–û–ù–ù–û–ï –ü–û–õ–ï",
    "–ß–ê–ö–†–´ –°–£–î–¨–ë–´",
    "–ü–†–û–®–õ–û–ï –í–õ–ò–Ø–ï–¢ –ù–ê–°–¢–û–Ø–©–ï–ï",
    "–ú–ê–¢–†–ò–¶–ê –í–û–ó–ú–û–ñ–ù–û–°–¢–ï–ô",
    "–†–ï–ó–û–ù–ê–ù–° –ß–ê–°–¢–û–¢",
    "–≠–ù–ï–†–ì–ï–¢–ò–ß–ï–°–ö–ò–ô –ò–ú–ü–£–õ–¨–°",
    "–ü–°–ò–•–û–ê–ö–¢–ò–ß–ï–°–ö–ò–ô –≠–§–§–ï–ö–¢",
    "–ù–£–õ–ï–í–û–ï –ü–û–õ–ï –°–û–ó–ù–ê–ù–ò–Ø",
    "–¢–†–ê–ù–°–¶–ï–ù–î–ï–ù–¢–ê–õ–¨–ù–´–ô –û–ü–´–¢",
    "–í–ò–ë–†–ê–¶–ò–û–ù–ù–ê–Ø –ú–ï–î–ò–¶–ò–ù–ê",
    "–ö–û–°–ú–ò–ß–ï–°–ö–û–ï –°–û–ó–ù–ê–ù–ò–ï",
    "–ö–í–ê–ù–¢–û–í–ê–Ø –ó–ê–ü–£–¢–ê–ù–ù–û–°–¢–¨"
];

let phraseIndex = 0;
let phraseElement = null;

function showMysticPhrase() {
    // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é —Ñ—Ä–∞–∑—É –µ—Å–ª–∏ –µ—Å—Ç—å
    if (phraseElement) {
        phraseElement.remove();
    }
    
    // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é —Ñ—Ä–∞–∑—É
    phraseElement = document.createElement('div');
    phraseElement.className = 'mystic-phrase';
    phraseElement.textContent = phrases[phraseIndex];
    
    // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
    const positions = [
        { top: '20%', left: '10%' },
        { top: '30%', right: '15%' },
        { top: '50%', left: '20%' },
        { top: '70%', right: '10%' },
        { top: '80%', left: '30%' },
        { top: '15%', right: '25%' },
        { top: '60%', left: '15%' },
        { top: '40%', right: '20%' }
    ];
    
    const pos = positions[Math.floor(Math.random() * positions.length)];
    Object.assign(phraseElement.style, pos);
    
    document.body.appendChild(phraseElement);
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ—Ä–∞–∑—É
    setTimeout(() => {
        phraseElement.style.opacity = '1';
    }, 100);
    
    // –°–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 4 —Å–µ–∫—É–Ω–¥—ã
    setTimeout(() => {
        if (phraseElement) {
            phraseElement.style.opacity = '0';
            setTimeout(() => {
                if (phraseElement) {
                    phraseElement.remove();
                    phraseElement = null;
                }
            }, 2000);
        }
    }, 4000);
    
    // –°–ª–µ–¥—É—é—â–∞—è —Ñ—Ä–∞–∑–∞
    phraseIndex = (phraseIndex + 1) % phrases.length;
}

// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ—Ä–∞–∑—ã –≤ —Å–ª—É—á–∞–π–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã - –ß–ê–©–ï –∏ –ß–ê–°–¢–ï!
setInterval(() => {
    const random = Math.random();
    if (random < 0.7) { // 70% —à–∞–Ω—Å
        showMysticPhrase();
    }
}, 4000); // –ö–∞–∂–¥—ã–µ 4 —Å–µ–∫—É–Ω–¥—ã

// –°–æ–∑–¥–∞–Ω–∏–µ –º–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —á–∞—Å—Ç–∏—Ü
function createMysticalParticles() {
    const container = document.getElementById('mysticalEffects');
    if (!container) return;
    container.innerHTML = '';
    
    for (let i = 0; i < 20; i++) {
        setTimeout(() => {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 10 + 's';
            particle.style.animationDuration = (10 + Math.random() * 10) + 's';
            container.appendChild(particle);
        }, i * 200);
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', () => {
    loadProduct();
    createMysticalParticles();
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —á–∞—Å—Ç–∏—Ü—ã –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
    if (!window.__mysticalParticlesInterval) {
        window.__mysticalParticlesInterval = setInterval(createMysticalParticles, 30000);
    }
});

// –§—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–≤—É–∫–æ–º
function toggleSound() {
    if (window.soundManager) {
        window.soundManager.toggle();
    }
}

function changeVolume(value) {
    if (window.soundManager) {
        window.soundManager.setVolume(value / 100);
    }
}
</script>

</body>
</html>
